stages:
  - build
  - test
  - deploy

copy files:
  stage: build
  tags:
    - shell
  # before_script:
  #   - sudo rm -r ~/projectvictory-test/backend/
  #   - sudo rm -r ~/projectvictory-test/frontend/
  #   #- sudo rm -r ~/projectvictory-test/static/

  script:
    - sudo cp -Rf Backend/victory ~/projectvictory-test/backend/
    - sudo cp -Rf Frontend/ ~/projectvictory-test/frontend/
    - sudo cp -f nginx.conf ~/projectvictory-test/
    - sudo cp -f docker-compose.yaml ~/projectvictory-test/
  only:
    - dev
  
build application:
  stage: test
  tags:
    - shell
  before_script:
    - cd ~/projectvictory-test
  script:
    - docker compose up -d --build
  only:
    - dev
